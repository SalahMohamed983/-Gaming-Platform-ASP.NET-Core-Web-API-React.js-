using BusinessLayer.Mapper;
using DataAccessLayer.RepoInterfaces;
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Threading.Tasks;

namespace DataAccessLayer.Entities
{
    public class FavoritGamesService : IFavoritGames
    {

        private readonly IUnitOfWork _unitOfWork;
        public FavoritGamesService(IUnitOfWork unitOfWork)
        {
            _unitOfWork = unitOfWork;

        }
        public async Task<bool> Add(FavoritGamesDto favoritGames)
        {

            var favorit = FavoritGamesMapper.ToEntity(favoritGames);

            _unitOfWork.FavoritGames.Add(favorit);

            return (await _unitOfWork.Complete());

        }

        public async Task<List<FavoritGamesDto>> GetAllFavoritGames()
        {
            var games = await _unitOfWork.FavoritGames.GetAll(p => true, new[] { "Games", "Users", "Games.Images" });

            var dtos = FavoritGamesMapper.ToDtos(games);

            return dtos;
        }

        public async Task<bool> Delete(int Id)
        {
            _unitOfWork.FavoritGames.Delete(Id);

            return (await _unitOfWork.Complete());
        }
    }
}
